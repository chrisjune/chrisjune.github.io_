<!DOCTYPE html>
<html class="no-js">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Chrisjune blog | Linux Command 2 - top을 통해 살펴보는 프로세스 정보들</title>
    <meta name="description" content="top을 통해 살펴보는 프로세스 정보들">

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="https://chrisjune.github.io//kernel-02-top">
    <link rel="alternate" type="application/rss+xml" title="Chrisjune blog" href="https://chrisjune.github.io//feed.xml" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123601360-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-123601360-1');
    </script>

    <!--[if lt IE 9]>
        <script src="/js/vendor/html5shiv.min.js"></script>
    <![endif]-->
</head>


  <body class="">

    <header class="hero-image" style='background-image: url(/img/feature-wolf.jpg);'>
    <span class="menu-trigger animated fadeInDown">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </span>

    <!-- if the user has javascript disabled they can still use the menu -->
<noscript>
    <div class="no-js-menu">
        <ul>
            
                <li><i class="fa fa-home"></i><a href="/">Home</a></li>
            
                <li><i class="fa fa-plane"></i><a href="/contact">Contact</a></li>
            
                <li><i class="fa fa-user"></i><a href="/author/chrisjune">Author</a></li>
            
        </ul>
    </div>
</noscript>
<!-- end no script -->

    <div id="menu-target">
    <ul>
        
            <li><i class="fa fa-home"></i><a href="/">Home</a></li>
        
            <li><i class="fa fa-plane"></i><a href="/contact">Contact</a></li>
        
            <li><i class="fa fa-user"></i><a href="/author/chrisjune">Author</a></li>
        
    </ul>
</div>

</header>

<main class="container">
    <div class="row">
        <div class="col-xs-12 col-md-8 single-content-sidebar">

            <h1>Linux Command 2 - top을 통해 살펴보는 프로세스 정보들</h1>

            <p><strong>top을 통해 살펴보는 프로세스 정보들</strong></p>

<h2 id="21-시스템의-상태-살피기">2.1 시스템의 상태 살피기</h2>
<ul>
  <li><code class="highlighter-rouge">top -b</code>
    <ul>
      <li>-b 옵션으로 기존 정보 그대로 유지
  ```shell script
  top - 12:28:05 up 1 min,  0 users,  load average: 0.68, 0.31, 0.11
  Tasks:   2 total,   1 running,   1 sleeping,   0 stopped,   0 zombie
  %Cpu(s): 12.2 us,  7.8 sy,  0.0 ni, 76.7 id,  2.3 wa,  0.0 hi,  0.9 si,  0.0 st
  KiB Mem :  2047132 total,   403320 free,   756340 used,   887472 buff/cache
  KiB Swap:  1048572 total,  1048572 free,        0 used.  1141920 avail Mem</li>
    </ul>

    <p>PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
    1 root      20   0   18504   3296   2876 S   0.0  0.2   0:00.03 bash
   15 root      20   0   36480   3036   2684 R   0.0  0.1   0:00.00 top
  ```</p>
    <ol>
      <li>Up: 서버가 구동된 시각과 구동시간</li>
      <li>Users: 로그인해있는 user의 수</li>
      <li>Load average: 서버에서 실행중 또는 대기중인 프로세스의 수의 합</li>
      <li>Tasks: 구동중인 프로세스의 개수</li>
      <li>CPU, Memory, Swap memory의 사용량을 나타냄</li>
      <li>PR: 프로세스의 실행 우선순위. 낮은 수일 수록 높은 우선순위를 나타낸다.</li>
      <li>NI: PR값을 얼만큼 조절할 것인지 결정. PR값에 더하여 우선순위를 조정한다</li>
      <li>VIRT, RES, SHR: 프로세스가 사용하는 메모리양을 나타내는 정보. 메모리 누수를 확인할 수 있는 부분!</li>
      <li>S: 프로세스의 상태를 나타내는 정보
        <h2 id="22-virt-res-shr">2.2 VIRT, RES, SHR</h2>
      </li>
    </ol>
  </li>
  <li><code class="highlighter-rouge">VIRT</code>:
    <ul>
      <li>task(프로세스)가 사용하고 있는 virtual memory의 전체용량</li>
      <li>프로세스에 할당된 가상 메모리 전체의 크기</li>
      <li>실제로 할당되지 않은 가상의 공간이기 때문에 크기에 따른 제약이나 문제가 발생하지 않는다</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">RES</code>
    <ul>
      <li>task(프로세스)가 사용하고 있는 physical memory의 용량</li>
      <li>실제로 메모리에 올려서 사용하고 있는 크기</li>
      <li>메모리 점유율이 높은 프로세스는 RES를 확인해야 한다</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">SHR</code>
    <ul>
      <li>다른 프로세스와 공유하고 있는 shared memory의 용량</li>
      <li>예시, 리눅스 glibc 라이브러리
        <h2 id="23-virt와-res그리고-memory-commit의-개념">2.3 VIRT와 RES그리고 Memory Commit의 개념</h2>
      </li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">Memory Commit</code>
    <ul>
      <li>프로세스는 독립된 작업공간이 필요하기 때문에 Virtual memory 공간을 할당받고, 실제로 메모리에 쓰게될 때 할당하게 된다</li>
      <li>커널로부터 메모리를 할당 받고 메모리 주소를 전달받지만, 실제 물리메모리에 할당하지 않는 동작방식</li>
      <li>virt: 가상메모리는 프로세스가 커널로부터 사용을 예약받은 메모리</li>
      <li>malloc()과 같은 시스템 콜로 자신이 필요로 하는 메모리할당을 요청</li>
      <li>가용용량을 확인 후 가상메모리 주소를 전달. 하지만 실제 물리 메모리에 할당하지 않음</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">Page Table</code>
    <ul>
      <li>물리 메모리와 가상메모리가 매핑된 커널 전역 변수</li>
      <li>프로세스에 할당된 가상메모리에 실제 쓰기 작업을 하면 page fault가 발생</li>
      <li>이때 물리 메모리에 가상 메모리를 매핑함</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">Memory Commit을 사용하는 이유</code>
    <ul>
      <li>COW(Copy on Write)를 사용하기 위하여</li>
      <li>COW
        <ul>
          <li>메모리 리소스를 효율적으로 쓰기 위하여 프로세스가 복사될 때, 복사된 프로세스는 기존의 메모리 리소스를 바라보고 있다가</li>
          <li>프로세스가 리소스에 쓰는작업이 될때, 복사를 하는 동작 방식
            <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="c1"># x and y use the same buffer 
</span>  <span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># now y use a different buffer, x usee the same old buffer.
</span></code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>



        </div>
        <!-- disqus -->
        <div id="disqus_thread"></div>
        <script>
        
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://toms-tech-log.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                     
        <!-- main-content/col -->

        <div class="col-xs-12 col-md-3 col-md-offset-1 single-content-sidebar-area">

            <img src='img/tom.jpg' class="user-icon " alt="user-image">
            <div class="meta">

                <div class="sidebar-info">
                    <a href="/author/tom">Tomas</a> in <a href='category/linux'>Linux</a>
                </div>

                <div class="sidebar-readtime">
                    <i class="fa fa-bookmark"></i> 10 minute read
                </div>

            </div>

            <h2 class="favorites">Similar Posts</h2>

            
                
                <div class="similar-post">
                    <a href="/kernel-01-info"><h3>Linux Command 1 - 시스템 구성 정보 확인하기</h3></a>
                </div>
                
            
                
                <div class="similar-post">
                    <a href="/drf-12-authentication"><h3>DRF 12 - DRF Authentication</h3></a>
                </div>
                
            
                
                <div class="similar-post">
                    <a href="/drf-11-default-settings"><h3>DRF 11 - DRF Default Settings</h3></a>
                </div>
                
            
                
                <div class="similar-post">
                    <a href="/drf-10-throttling"><h3>DRF 10 - Throttling</h3></a>
                </div>
                
            
                
                <div class="similar-post">
                    <a href="/drf-09-authentication"><h3>DRF 09 - Authentication</h3></a>
                </div>
                
            
                
            
                
            
                
            
                
            
                
            
        </div>

    </div> <!--/row -->

</main> <!-- /container -->

<footer class="single">
    <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-2">
            <img src="/img/tom.jpg" class="user-icon " alt="user-image">
        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="category-list">
                <p>Published <span>Jan 21, 2020</span></p>
                <p><a href="/author/tom">Tomas</a> in <a href='/category/linux'>Linux</a></p>

                <div class="other-catergories">
                    <h3>Also found in</h3>

                    <ul>
                        
                        <li>
                            <a href='/category/linux'>Linux</a>
                            
                        </li>
                        
                    </ul>
                </div>

            </div>
        </div><!-- end col -->
        <div class="col-xs-12 col-sm-4">
            <div class="social">
                <p>Share this article</a>
                <div class="social-links">
                    <a class="social-icon" href="#" data-platform="twitter" data-message="" data-url="https://chrisjune.github.io//kernel-02-top"><i class="fa fa-twitter"></i></a>

                    <a class="social-icon" href="#" data-platform="facebook" data-message="" data-url="https://chrisjune.github.io//kernel-02-top"><i class="fa fa-facebook-official"></i></a>
                    <a class="social-icon" data-platform="mail"  href="mailto:chrisjune@gmail.com?body=https://chrisjune.github.io//kernel-02-top"><i class="fa fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </div><!-- end row -->
</div>

    
        <div class="row read-another-section">
    
        
        <a href="/kernel-01-info"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">Linux Command 1 - 시스템 구성 정보 확인하기</h3>
        </div></a>
        
    
        
        <a href="/drf-12-authentication"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">DRF 12 - DRF Authentication</h3>
        </div></a>
        
    
        
        <a href="/drf-11-default-settings"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">DRF 11 - DRF Default Settings</h3>
        </div></a>
        
    
        
        <a href="/drf-10-throttling"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">DRF 10 - Throttling</h3>
        </div></a>
        
    
        
        <a href="/drf-09-authentication"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">DRF 09 - Authentication</h3>
        </div></a>
        
    
        
        <a href="/drf-08-validate-of-serializer"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src='/img/recommend-fire.jpg'>
            <h3 class="read-another">DRF 08 - Serializer 유효성검사</h3>
        </div></a>
        
    
        
    
        
    
        
    
        
    
</div>
    
</footer>



    <script src='/js/vendor/modernizr.custom.32229-2.8-respondjs-1-4-2.js'></script>
    <script src="/js/vendor/jquery-1.11.2.min.js"></script>
    <script src='/js/vendor/jquery.jpanelmenu.min.js'></script>
    <script type='application/javascript' src='/js/vendor/fastclick.min.js'></script>
    
    <script src=' /js/main.js'></script>
  
  </body>

</html>
